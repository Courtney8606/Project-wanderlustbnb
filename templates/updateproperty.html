<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/static/css/updateproperty.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker.min.css"
      rel="stylesheet"
    />
    <title>Update a Listing</title>
  </head>

  <body>
    <div class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <a class="nav-link active" aria-current="page" href="/index">
        <img
          class="primary-icon"
          src="/static/images/paperplane.png"
          class="logo"
          style="width: 60px"
        />
      </a>

      <ul class="nav-list navbar-nav me-auto mb-2 mb-md-0" id="navi-list">
        <li class="nav-item">
          <a class="nav-link" href="/account">My account</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/">Signout</a>
        </li>
      </ul>
    </div>

    <p>
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <ul>
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}
    </p>

    {% if filename %}
    <div>
      <img
        src="{{ url_for('display_image', filename=filename) }}"
        style="max-width: 300px; max-height: auto"
      />
    </div>
    {% endif %}

    <form
      id="listing-form"
      class="listing-form"
      action="/updated/{{ space.id }}"
      method="POST"
      enctype="multipart/form-data"
    >
      <h2>Update property details</h2>
      <input
        type="hidden"
        id="spaceId"
        name="space_id"
        value="{{ space.id }}"
      />
      <p>
        <label for="name"> Name</label><br />
        <input type="text" name="name" id="name" />
      </p>
      <p>
        <label for="location">Location</label><br />
        <input type="text" name="location" id="location" />
      </p>
      <p>
        <label for="price">Price per night</label><br />
        <input type="text" name="price" id="price" />
      </p>
      <p>
        <label for="description">Description</label><br />
        <input type="text" name="description" id="description" />
        <br />
        <br />
        <label for="file">Select an image to upload</label><br />
      </p>

      <dl>
        <p>
          <input
            type="file"
            name="file"
            id="file"
            class="form-control"
            autocomplete="off"
            required
          />
        </p>
      </dl>
      <p>
        <input type="submit" value="Submit" class="btn btn-primary" />
      </p>
    </form>
    <button class="btn btn-primary update-button"><a id="back-button" href="/host">Back</a></button>

  </body>
</html>
